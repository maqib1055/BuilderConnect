"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8337],{1255:function(e,t,i){i.d(t,{Z:function(){return S}});var n=i(22988),r=i(23950),a=i(2265),o=a.useLayoutEffect,l=function(e){var t=a.useRef(e);return o(function(){t.current=e}),t},s=function(e,t){if("function"==typeof e){e(t);return}e.current=t},c=function(e,t){var i=(0,a.useRef)();return(0,a.useCallback)(function(n){e.current=n,i.current&&s(i.current,null),i.current=t,t&&s(t,n)},[t])},d={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},u=function(e){Object.keys(d).forEach(function(t){e.style.setProperty(t,d[t],"important")})},m=null,g=function(e,t){var i=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?i+t.borderSize:i-t.paddingSize},p=function(){},h=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],f=!!document.documentElement.currentStyle,v=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var i=h.reduce(function(e,i){return e[i]=t[i],e},{}),n=i.boxSizing;if(""===n)return null;f&&"border-box"===n&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px");var r=parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),a=parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth);return{sizingStyle:i,paddingSize:r,borderSize:a}};function _(e,t,i){var n=l(i);a.useLayoutEffect(function(){var i=function(e){return n.current(e)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var x=function(e){_(window,"resize",e)},b=function(e){_(document.fonts,"loadingdone",e)},I=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],S=a.forwardRef(function(e,t){var i=e.cacheMeasurements,o=e.maxRows,l=e.minRows,s=e.onChange,d=void 0===s?p:s,h=e.onHeightChange,f=void 0===h?p:h,_=(0,r.Z)(e,I),S=void 0!==_.value,w=a.useRef(null),T=c(w,t),y=a.useRef(0),j=a.useRef(),E=function(){var e,t,n,r,a,s,c,d,p,h,_,x=w.current,b=i&&j.current?j.current:v(x);if(b){j.current=b;var I=(e=x.value||x.placeholder||"x",void 0===(t=l)&&(t=1),void 0===(n=o)&&(n=1/0),m||((m=document.createElement("textarea")).setAttribute("tabindex","-1"),m.setAttribute("aria-hidden","true"),u(m)),null===m.parentNode&&document.body.appendChild(m),r=b.paddingSize,a=b.borderSize,c=(s=b.sizingStyle).boxSizing,Object.keys(s).forEach(function(e){m.style[e]=s[e]}),u(m),m.value=e,d=g(m,b),m.value=e,d=g(m,b),m.value="x",h=(p=m.scrollHeight-r)*t,"border-box"===c&&(h=h+r+a),d=Math.max(h,d),_=p*n,"border-box"===c&&(_=_+r+a),[d=Math.min(_,d),p]),S=I[0],T=I[1];y.current!==S&&(y.current=S,x.style.setProperty("height",S+"px","important"),f(S,{rowHeight:T}))}};return a.useLayoutEffect(E),x(E),b(E),a.createElement("textarea",(0,n.Z)({},_,{onChange:function(e){S||E(),d(e)},ref:T}))})},10420:function(e,t,i){i.d(t,{TextToImageFormProvider:function(){return f},s:function(){return v}});var n=i(57437),r=i(31014),a=i(2265),o=i(39343),l=i(43897),s=i(30257),c=i(10733),d=i(91606),u=i(82074),m=i(47802);let g=e=>{let t=(0,d.O_)(),i=(0,u.p)(e=>e.persistedTextToImageSetting);return(0,a.useEffect)(()=>{if(!t||!i)return;let n=(0,m.ER)();n?e.reset({...i,prompt:n}):e.reset({...i})},[t,e]),null};var p=i(16463);let h=e=>{let t=(0,d.O_)(),i=(0,p.useSearchParams)(),{textToImage:n}=(0,c.Td)()(e=>e.defaultSettings),r=i.get(s.a4.ID),o=(0,l.l$)((0,m.X7)(null!=r?r:"",n.styleListId));return(0,a.useEffect)(()=>{t&&r&&e.setValue(s.xi.STYLE,o)},[e,t]),null},f=e=>{let{children:t}=e,{textToImage:i}=(0,c.Td)()(e=>e.defaultSettings),a=(0,l.ic)(i.modelListId),d=(0,l.l$)(i.styleListId),u=(0,l.$I)(i.controlListId),m=(0,c.Td)()(e=>e.textToImageSviImageGuidance),p=(0,o.cI)({mode:"onChange",resolver:(0,r.F)(s.xG),defaultValues:{...i,model:a,style:d,image_guidance:{...m,mode:u.parameter,strength_mode:i.strength_mode},random_prompt_clicked:!1}});return g(p),h(p),(0,n.jsx)(o.RV,{...p,children:t})},v=()=>{let e=(0,o.Gc)();return(0,a.useMemo)(()=>({formHook:e}),[e])}},84001:function(e,t,i){i.d(t,{TextToImage:function(){return ep}});var n,r,a=i(57437),o=i(2265),l=i(52247),s=i(41926),c=i(89565),d=i(72143),u=i(8127),m=i(54795),g=i(97157),p=i(47802);(n=r||(r={})).TEXT_TO_IMAGE="txt2img",n.IMAGE_TO_IMAGE="img2img";let h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.4;return e?"(".concat(e.trim(),":").concat(t,")"):""},f=(e,t)=>{let i=t.match(/^\w+\s+\w+/),n=t.match(/(\w+\s+\w+)\W*$/);if(!i||!n||!i.length||!n.length)return e;let r=i[0].replace(/^\W+|\W+$/gm,""),a=n[0].replace(/^\W+|\W+$/gm,""),o=e.indexOf(r),l=e.lastIndexOf(a);if(-1===o||-1===l)return e;let s=e.substring(o,l+a.length),c=e.substring(0,o),d=e.substring(l+a.length).replace(/\.$/g,"");return"".concat(h(c),' "').concat(s,'" ').concat(h(d)).trim()},v=async e=>{let t=e.image_guidance.croppedImage,i=e.image_guidance,n=e.image_guidance.mode,r=e.image_guidance.strength_mode,a={};if(!t)return a;if(!n||!r)throw Error("Invalid control mode or strength mode");switch(n){case g.e.STRUCTURE:{let e=i[n],o=e.strength[r];a.control_1_image=await (0,u.K$)(t),a.control_1_type=e.control_1_type,a.control_1_weight=o,a.variation=e.variation;break}case g.e.BASE:{let e=i[n],o=e.strength[r];a.image=await (0,u.K$)(t),a.variation=e.variation,a.denoising_strength=o;break}case g.e.FACE:{let e=i[n],o=e.strength[r];a.face=await (0,u.K$)(t),a.variation=e.variation,a.face_strength=o;break}case g.e.STYLE:{let e=i[n],o=e.strength[r];a.style_image=await (0,u.K$)(t),a.variation=e.variation,a.style_strength=o}}return a},_=async(e,t,i)=>{var n,r,a,o;let l=e.image_guidance.base.image_caption||"",s=(null===(n=e.style)||void 0===n?void 0:n.tag)?"<effect>".concat(null===(r=e.style)||void 0===r?void 0:r.tag,"</effect>"):"",c=Object.entries(e.tags).flatMap(e=>Array.from(e[1])),d=f(e.prompt,l),g=(0,m.SN)(d,null===(a=e.model)||void 0===a?void 0:a.init_prompt,...c),h={prompt:g?g+s:"",style_id:e.model.model_id,aspect_ratio:e.aspect_ratio,variation:t};if("img2img"===t&&i)h.denoising_strength=null!==(o=e.denoising_strength)&&void 0!==o?o:.6,h.image=await (0,u.K$)(i);else{let t=await v(e);h={...h,...t}}return(0,p.wh)(h)},x=new AbortController,b=async(e,t,i,n)=>{x.signal.aborted&&(x=new AbortController);let r=(0,m.kw)(t);r.append("Style-Id","".concat(e.model.model_id)),l.v.IS_PROD_DEPLOYMENT||r.append("X-Internal","developer_mode");let a=await _(e,i,n),{data:o}=await d.p.post(m.TG.FROM_TEXT,{body:a,headers:r,signal:x.signal},{throwOnError:!0});return{src:(0,u.RJ)(o)}},I=()=>{x.abort()},S=e=>{let t=(0,c.useMutation)(t=>b(t.data,t.isPremium,e,t.imageForVariation));return Object.assign(t,{cancelRequest:()=>{t.isLoading&&I()}})};var w=i(67259);let T=()=>!1,y=(0,w.hB)(T);(0,w.hB)(T);var j=i(10733),E=i(81750),z=i(24827),C=i(14125),O=i(29328),A=i(82442),L=i(16463),N=i(80732),P=i(25701),F=i(63218),R=i(96994),M=i(10420),k=i(6498),G=i(72811);let V=()=>{var e;let{formHook:t}=(0,M.s)(),{isLoading:i,data:n}=(0,k.X)(),r=0;if(i)return{cost:r};let a=null==n?void 0:n[m.TG.FROM_TEXT];if(!a)return{cost:r};let{criteria:o}=a,l=t.watch("model"),s=t.watch("num_images");return{cost:(r+=(0,G.l)(o,l)+(null!==(e=a.base)&&void 0!==e?e:0))*s}};var W=i(85951);let H=e=>{var t,i,n,r,a,o,l;let{generateTextToImageMutation:s,isPremium:c}=e,d=(0,L.useRouter)(),u=(0,L.usePathname)(),m=(0,E.m8)()(e=>e.user),{formHook:g}=(0,M.s)(),{aggregator:p}=(0,W.O)(),{page:h,source:f}=(0,R.V)(),v=y(e=>e.completeImageGenerationLoadingOnGivenCollection),_=y(e=>e.deleteLoadingImageFromGivenCollection),x=y(e=>e.addImageToGivenCollectionWithLoading),b=y(e=>e.createCollectionWithSettings),I=y(e=>e.collections),S=(0,E.m8)()(e=>e.subscription),w=(0,C.L)(S),T=null!==(o=null===(n=w.stripeSubscription)||void 0===n?void 0:null===(i=n.StripePrice)||void 0===i?void 0:null===(t=i.StripeProduct)||void 0===t?void 0:t.name)&&void 0!==o?o:"Free",j=null!==(l=null===(a=w.stripeSubscription)||void 0===a?void 0:null===(r=a.StripePrice)||void 0===r?void 0:r.billingInterval)&&void 0!==l?l:"Free",z=w.isSubscriptionActive?"Premium":"Free",{cost:G}=V(),{data:H}=(0,k.j)(),B=(null==H?void 0:H.platformSpecificTotal)?H.platformSpecificTotal-G:0,D=async(e,t)=>{let i=x(t);try{let n=await s.mutateAsync({data:e,isPremium:c});if(!n)throw Error("Processing stopped");return v({image:n,imageId:i.imageId,collectionId:t}),{isSuccess:!0}}catch(e){return _({imageId:i.imageId,collectionId:t}),(0,O.eL)(e,c),{isSuccess:!1,error:e}}},U=async(e,t)=>{let i=await Promise.all(Array.from({length:e.num_images}).map(()=>D(e,t)));return i.reduce((e,t)=>t.isSuccess?{...e,successCount:e.successCount+1}:{...e,failureCount:e.failureCount+1,error:t.error},{successCount:0,failureCount:0,totalCount:i.length,error:Error("Default")})};return async e=>{var t;let i;if(!e.prompt){A.Am.error("Please enter a prompt");return}if(!m){d.push("".concat(F.H7.TOOLS_AUTH,"?redirect=").concat(u));return}if(new Set(I.flatMap(e=>e.images).filter(e=>e.isLoading).map(e=>e.id)).size+e.num_images>8){A.Am.error("Maximum ".concat(8," concurrent images can be generated!"));return}let{collectionId:n}=b(e);setTimeout(()=>{var e;null===(e=document.getElementById(n))||void 0===e||e.scrollIntoView({behavior:"smooth"})});let r=await U(e,n),a=Object.values(e.tags).map(e=>Array.from(e)).flat().join(","),o=Object.entries(e.tags).filter(e=>{let[t,i]=e;return i.size>0}).map(e=>{let[t,i]=e;return t}).join(","),l={source:f,feature:P.L.TEXT_TO_IMAGE_V2,page_name:h,aspect_ratio:e.aspect_ratio,number_of_images:e.num_images,model_id:e.model.id,model_used:e.model.name,prompt_length:null===(t=e.prompt)||void 0===t?void 0:t.length,tag_used:a.length?a:"NA",tag_category:o.length?o:"NA",random_prompt_used:e.random_prompt_clicked,user_account_status:z,user_plan:T,user_plan_period:j,image_guidance:!!e.image_guidance.image,tokens_remaining:B};i=r.totalCount===r.successCount?{processing_status:"Successful"}:0===r.successCount?{processing_status:"Failure",processing_error:(0,O.t$)(r.error)}:{processing_status:"Partial",processing_error:(0,O.t$)(r.error)},p.log(N.H.mixpanel.image_generated.withProperties({...l,email:m.email,distinct_id:m.id,...i})),p.log(N.H.clevertap.image_generated.withProperties({...l,...i})),g.setValue("random_prompt_clicked",!1)}},B=e=>{let{generateTextToImageMutation:t,isPremium:i}=e,n=H({generateTextToImageMutation:t,isPremium:i}),{formHook:r}=(0,M.s)(),a=(0,L.useSearchParams)(),l=(0,L.usePathname)(),s=(0,L.useRouter)(),c=(0,E.m8)()(e=>e.user),d=a.get("generate"),u=r.getValues("prompt");return(0,o.useEffect)(()=>{if("true"===d&&u&&c){r.handleSubmit(n)();let e=new URLSearchParams(window.location.search);e.delete("generate"),s.replace("".concat(l,"?").concat(e.toString()))}},[u,c,l]),null};var D=i(21803),U=i(69085),$=i(97910),K=i(16838),X=i(63549),Y=i(24528),q=i(91606),Z=i(13495),J=i(81149),Q=i(31941),ee=i(8792),et=i(95401);let ei=e=>{let{title:t,children:i,maxLength:n,tooltipContentProps:r}=e;return t.length>n?(0,a.jsx)(et.WithGenericTooltip,{content:t,genericTooltipContentProps:{side:"top",align:"end",...r},children:i("".concat(t.slice(0,n-1),"..."))}):i(t)},en=e=>{let{Icon:t,title:i,image:n,maxLength:r=15}=e;return(0,a.jsx)(ei,{title:i,maxLength:r,tooltipContentProps:{align:"center"},children:e=>(0,a.jsxs)("div",{className:(0,Y.cn)("flex h-7 items-center gap-1 rounded-xl border border-neutral-30 p-1 pr-2 dark:border-neutral-600",{"gap-2":t}),children:[n&&(0,a.jsx)("img",{src:n,alt:e,className:"size-5 rounded-lg"}),t&&(0,a.jsx)(t,{className:"size-5"}),(0,a.jsx)("p",{className:"text-nowrap text-xs font-medium",children:e})]})})},er=e=>{let{prompt:t,settingItems:i,handleDelete:n,isSettingItems:r,handleRegenerate:o,handleDownloadAll:l}=e,[,s]=(0,q.m9)();return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ei,{title:t,maxLength:70,children:e=>(0,a.jsx)("p",{className:"text-base font-medium",children:e})}),(0,a.jsx)(J.z,{size:"icon-sm",variant:"ghost-secondary",onClick:()=>{s(t).then(()=>A.Am.success("Prompt copied to clipboard!"))},children:(0,a.jsx)(ee.TI,{className:"size-[18px] stroke-[2]"})}),(0,a.jsx)(J.z,{size:"icon-sm",variant:"ghost-secondary",onClick:o,children:(0,a.jsx)(Z.BG,{className:"size-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r&&i.map(e=>(0,a.jsx)(en,{...e},e.title)),(0,a.jsxs)(Q.z$,{modal:!1,children:[(0,a.jsx)(Q.pm,{asChild:!0,children:(0,a.jsx)(J.z,{size:"icon-sm",className:"h-8 p-0",variant:"ghost-secondary",children:(0,a.jsx)(Z.wz,{className:"size-[18px] shrink-0 stroke-[2]"})})}),(0,a.jsxs)(Q.Yy,{align:"end",position:"item-aligned",className:"min-w-[200px]",children:[(0,a.jsxs)(Q.KK,{className:"flex items-center justify-start",onClick:async()=>{await l()},children:[(0,a.jsx)(Z._8,{className:"mr-2 size-5"}),"Download All"]}),(0,a.jsxs)(Q.KK,{onClick:n,className:"flex items-center justify-start !text-error-500",children:[(0,a.jsx)(Z.XH,{className:"mr-2 size-5 text-error-500"}),"Delete"]})]})]})]})]})},ea=e=>{let{isPremium:t,onFullView:i,collection:n,onRegenerate:r,onDeleteCollection:c}=e,[d,u]=(0,o.useState)(!1),{exportAllImagesHandler:m}=(0,X.P)({isSubscriptionActive:t,selectedCollection:n}),g=[{title:n.settings.aspect_ratio,Icon:(0,z.o)(Object.values(s.TOOLS_SETTINGS.ASPECT_RATIO_SVI.content),null==n?void 0:n.settings.aspect_ratio)},{title:n.settings.model.name,image:"".concat(l.v.REMOTE_CONFIG_CDN).concat(n.settings.model.thumb)}],p=s.IK[n.settings.aspect_ratio],h=(e,t)=>{e&&(null==t||t({collectionId:n.id,imageId:e}))};return(0,a.jsxs)("div",{id:n.id,className:"flex flex-col gap-2 pb-4",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[(0,a.jsx)(er,{settingItems:g,prompt:n.settings.prompt,isSettingItems:d,handleDownloadAll:m,handleDelete:()=>c(n.id),handleRegenerate:()=>r(n.settings)}),(0,a.jsx)("div",{className:(0,Y.cn)("grid gap-2",p.grid),children:n.images.map(e=>{let t="isVariation"in e&&e.isVariation,n="isUpscaled"in e&&e.isUpscaled;return(0,a.jsxs)(K.dk.Root,{id:e.id,image:e.src,loaderVariant:"spinner",isLoading:e.isLoading,isFocused:e.isFocused,handleFullView:()=>h(e.id,i),className:(0,Y.cn)(p.minH,p.aspectRatio),children:[(0,a.jsx)(K.dk.ToolbarButtons,{image:e,handleFullView:()=>h(e.id,i)}),t&&(0,a.jsx)(K.dk.HighlightLabel,{children:"Variation"}),!t&&n&&(0,a.jsx)(K.dk.HighlightLabel,{children:"Upscaled"})]},e.id)})})]})},eo=e=>{let{isPremium:t,submitHandler:i,useRequiredStore:n,isVariationSupported:r,getFullViewSettingItems:l,fullViewModalState:s,setFullViewModalState:c,closeFullViewModal:d,handleImageVariate:u}=e,[m,g]=(0,o.useState)(-1),{collections:p}=n(e=>e),h=n(e=>e.setImageLoadingOnGivenCollection),f=n(e=>e.setImageUpscaleOnGivenCollection),v=n(e=>e.deleteImageFromGivenCollection),_=n(e=>e.deleteGivenCollection),{enhance:x}=(0,j.Td)()(e=>e.defaultSettings),b=(0,D.e)(),I=e=>{var t;let{collectionId:i,imageId:n}=e,r=p.findIndex(e=>e.id===i),a=null===(t=p[r])||void 0===t?void 0:t.images.findIndex(e=>e.id===n);g(r),c({isModalOpen:!0,initialImageIndex:a&&-1!==a?a:0})},S=async e=>{let{collectionId:i,imageId:n,upscaleConfig:r}=e;h(n,!0,i);let a=p.find(e=>e.id===i),o=null==a?void 0:a.images.find(e=>e.id===n);if(!o)throw Error("Image not found");try{let e=await b.mutateAsync({...x,...r,isPremium:t,originalImgSrc:o.src});f(n,e,!0,i),A.Am.success("Upscaled successfully")}catch(e){(0,O.eL)(e,t)}h(n,!1,i)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col gap-2",children:p.map(e=>(0,a.jsx)(ea,{isPremium:t,collection:e,onFullView:I,onRegenerate:i,onDeleteCollection:_},e.id))}),-1!==m&&(0,a.jsx)(U.h,{closeFullViewModal:d,isFullViewOpen:s.isModalOpen,children:(0,a.jsx)($.c,{loaderVariant:"spinner",closeFullViewModal:d,collection:p[m],initialImageIndex:s.initialImageIndex,getSettingItems:e=>l(e,p[m]),handleDeleteImage:e=>v({imageId:e,collectionId:p[m].id}),isVariationSupported:r(p[m]),handleImageUpscale:(e,t)=>S({imageId:e,collectionId:p[m].id,upscaleConfig:t}),handleImageVariate:(e,t)=>u({imageId:e,collectionId:p[m].id,variateConfig:t}),type:"responsive"})})]})};var el=i(31355);let es=()=>(0,a.jsx)("div",{className:"flex h-full min-h-[520px] w-full flex-1 items-center justify-center",children:(0,a.jsx)("div",{className:"aspect-square max-h-full overflow-hidden rounded bg-neutral-30 object-contain transition-all duration-500 dark:bg-neutral-900",children:(0,a.jsx)(el.V,{})})});var ec=i(39343),ed=i(24019),eu=i(2580),em=i(37079);let eg=e=>{let{generateTextToImageMutation:t,isPremium:i}=e,{formHook:n}=(0,M.s)(),{cost:r}=V(),o=(0,eu.a)(e=>e.isProcessing),l=(0,ec.qo)({control:n.control,name:"should_focus"}),s=H({generateTextToImageMutation:t,isPremium:i});return(0,a.jsx)("form",{onSubmit:n.handleSubmit(s),className:"flex h-[152px] w-full flex-shrink-0 justify-center",children:(0,a.jsx)(em.w,{variant:"v2",className:"w-[480px] laptop:w-[650px] desktop:w-full",tagPopoverControlArgs:{control:n.control,name:"tags"},promptFormHook:{formHook:n,name:"prompt",tokenCost:r,isLoading:!1,onCancel:()=>{},disabled:o,generateBtnId:ed.i.GENERATE_BTN_ID},shouldFocus:l,onFocusComplete:()=>{n.setValue("should_focus",!1)}})})},ep=()=>{let[e,t]=(0,o.useState)({isModalOpen:!1,initialImageIndex:0}),i=S(r.TEXT_TO_IMAGE),n=(0,E.m8)()(e=>e.subscription),{isSubscriptionActive:c}=(0,C.L)(n),d=S(r.IMAGE_TO_IMAGE);B({generateTextToImageMutation:i,isPremium:c});let u=H({generateTextToImageMutation:i,isPremium:c}),m=y(e=>e.collections),g=(0,j.Td)()(e=>e.textToImageSviModels),p=y(e=>e.completeImageGenerationLoadingOnGivenCollection),h=y(e=>e.deleteLoadingImageFromGivenCollection),f=y(e=>e.addImageToGivenCollectionWithLoading),v=async e=>{var t;let{collectionId:i,imageId:n,variateConfig:r}=e,a=m.find(e=>e.id===i),o=null==a?void 0:a.images.find(e=>e.id===n);if(!o){A.Am.error("Image for variation is not found");return}let l=JSON.parse(JSON.stringify(null!==(t=null==a?void 0:a.settings)&&void 0!==t?t:{}));if(!l){A.Am.error("Please generate an image first and then variate it");return}let s=f(i,o);try{let e=await d.mutateAsync({data:{...l,...null!=r?r:{}},isPremium:c,imageForVariation:o.src});if(!e){A.Am.error("Processing stopped"),h({imageId:s.imageId,collectionId:i});return}p({image:e,imageId:s.imageId,collectionId:i})}catch(e){h({imageId:s.imageId,collectionId:i}),(0,O.eL)(e,c)}};return(0,a.jsxs)("div",{className:"scrollbar__alt flex w-full flex-col overflow-auto",children:[0!==m.length||i.isLoading?(0,a.jsx)(eo,{fullViewModalState:e,setFullViewModalState:t,handleImageVariate:v,closeFullViewModal:()=>{t({isModalOpen:!1,initialImageIndex:0})},isPremium:c,useRequiredStore:y,isVariationSupported:e=>{var t;let i=null==e?void 0:e.settings.model,n=g.find(e=>e.id===(null==i?void 0:i.id));return null===(t=null==n?void 0:n.variateEnabled)||void 0===t||t},getFullViewSettingItems:(e,t)=>{var i,n;return[{title:"Model",value:null==t?void 0:null===(i=t.settings.model)||void 0===i?void 0:i.name,image:"".concat(l.v.REMOTE_CONFIG_CDN).concat(null==t?void 0:null===(n=t.settings.model)||void 0===n?void 0:n.thumb)},{title:"Aspect Ratio",value:null==t?void 0:t.settings.aspect_ratio,Icon:(0,z.o)(Object.values(s.TOOLS_SETTINGS.ASPECT_RATIO_SVI.content),null==t?void 0:t.settings.aspect_ratio)}]},submitHandler:e=>u(e)}):(0,a.jsx)(es,{}),(0,a.jsx)(eg,{isPremium:c,generateTextToImageMutation:i})]})}},97157:function(e,t,i){var n,r;i.d(t,{e:function(){return n}}),(r=n||(n={})).BASE="base",r.STRUCTURE="structure",r.FACE="face",r.STYLE="style"},30257:function(e,t,i){i.d(t,{a4:function(){return o},xG:function(){return p},xi:function(){return l}});var n=i(59772),r=i(83231),a=i(10579);let o={ID:"id",STYLE_NAME:"style_name",STYLE_THUMB:"style_thumb",TAG:"tag"},l={MODEL:"model",PROMPT:"prompt",NUM_IMAGES:"num_images",ASPECT_RATIO:"aspect_ratio",STYLE:"style"},s=n.z.object({low:n.z.number(),medium:n.z.number(),high:n.z.number()}),c=n.z.object({control_1_type:n.z.string(),variation:n.z.string(),strength:s}),d=n.z.object({image_caption:n.z.string().optional(),variation:n.z.string(),strength:s}),u=n.z.object({variation:n.z.string(),strength:s,has_detected_face:n.z.boolean().optional()}),m=n.z.object({variation:n.z.string(),strength:s}),g=n.z.object({image:r.KA,croppedImage:r.KA,mode:n.z.string().nullable(),base:d,structure:c,face:u,style:m,strength_mode:n.z.string().optional()}),p=n.z.object({model:a.SB,prompt:r.Pp,style:a.X2.omit({style_id:!0,init_prompt:!0,init_neg_prompt:!0,isPopular:!0}).extend({tag:n.z.string().optional().nullable()}),aspect_ratio:n.z.string(),num_images:n.z.number().min(1).max(8),transparency:n.z.boolean().optional(),image_guidance:g,tags:n.z.record(n.z.string(),n.z.set(n.z.string())),random_prompt_clicked:n.z.boolean().optional().default(!1),denoising_strength:n.z.number().optional(),should_focus:n.z.boolean().optional().default(!1)});g.omit({image:!0,croppedImage:!0,mode:!0})},2580:function(e,t,i){i.d(t,{a:function(){return n}});let n=(0,i(39099).Ue)(e=>({isProcessing:!1,setIsProcessing:t=>e(()=>({isProcessing:t}))}))},23950:function(e,t,i){i.d(t,{Z:function(){return n}});function n(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}}}]);